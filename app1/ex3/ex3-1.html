<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>JRostand stade reperes</title>
    <link rel="stylesheet" type="text/css" href="./style.css" />
</head>

<body>

    <h1>JRostand Reperes Stade</h1>
    <hr>
    <div id="map">...</div>

    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7Y32T_PJHZxYcK3BJYJFNwSl6cuvLXpo&callback=loadDoc&v=weekly" defer   ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>

       
        
        
        var markers;

        // when page is API google maps is complete, process for the map!
        // Ajax avec JQuery
    function loadDoc() {
        $.ajax({
                url: "markersJrostand.json",
                method: "GET",
                dataType: "json", 
                success: function(markers){
                    for (let i = 0; i < markers.length; i++) {
                        let marker = markers[i];
                        for (let key in marker) {
                            console.log(key + ": " + marker[key]);
                        }
                        console.log("____________");
                    }
                    const map = new google.maps.Map(document.getElementById("map"), {
                    center: markers[0],
                    zoom: 15,
                    mapTypeId: 'roadmap'
                    })

                    const pathCoords = [];

                    markers.forEach((coord, i) => {
                        const marker = new google.maps.Marker({
                            position: coord,
                            map: map,
                            title: `Marker ${i+1}`
                        });
                        marker.addListener('click', () => {
                        alert(`Vous avez cliqu√© sur le marker ${i+1}\n`);
                    });
                    pathCoords.push(coord);
                    const polyline = new google.maps.Polyline({
                        path: pathCoords,
                        geodesic: true,
                        strokeColor: "#FF0000",
                        strokeOpacity: 1.0,
                        strokeWeight: 2
                    });
                    polyline.setMap(map);
                }
                )}
    });
    };

    </script>


</body>

</html>
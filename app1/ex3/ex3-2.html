<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>JRostand Stade Repères</title>
<style>
  #map { height: 500px; width: 100%; }
  .infowindow-content {
    font-family: Arial, sans-serif;
    font-size: 14px;
}
</style>
</head>
<body>

<h1>JRostand Repères Stade</h1>
<hr>
<div id="map"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7Y32T_PJHZxYcK3BJYJFNwSl6cuvLXpo"></script>

<script>
function initMap() {
    $.getJSON("markersJrostand.json", function(data) {
        if (!data || !data.length) {
            console.error("JSON vide ou non chargé !");
            return;
        }

        const map = new google.maps.Map(document.getElementById("map"), {
            center: { lat: data[0].lat, lng: data[0].lng },
            zoom: 15
        });

        const infoWindow = new google.maps.InfoWindow()
        

        data.forEach(item => {
            const marker = new google.maps.Marker({
                position: { lat: item.lat, lng: item.lng },
                map: map,
                title: "Marker " + item.id
            });

            marker.addListener('click', function() {
                const contentString = `
                    <div class="infowindow-content">
                        <h3>Repère n°${item.id}</h3>
                        <p>Latitude : ${item.lat}</p>
                        <p>Longitude : ${item.lng}</p>
                    </div>
                `;
                infoWindow.setContent(contentString);
                infoWindow.open(map, marker);
            });
        });

        const polyline = new google.maps.Polyline({
            path: data.map(m => ({ lat: m.lat, lng: m.lng })),
            geodesic: true,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 2
        });
        polyline.setMap(map);
    }).fail(function(err) {
        console.error("Erreur chargement JSON :", err);
    });
}

$(document).ready(initMap);
</script>

</body>
</html>
